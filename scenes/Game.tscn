[gd_scene load_steps=9 format=3 uid="uid://dshp37wir2ocd"]

[ext_resource type="Script" path="res://scripts/Background.cs" id="1_t8q8t"]
[ext_resource type="PackedScene" uid="uid://bdcpnpk451uuy" path="res://scenes/TrackSet.tscn" id="3_jg4e7"]
[ext_resource type="Script" path="res://scripts/BeatController.cs" id="4_ndt71"]
[ext_resource type="Texture2D" uid="uid://c38hbhml4vx4i" path="res://assets/sprites/UI/T_LightBlack.png" id="5_0dxl0"]
[ext_resource type="AudioStream" uid="uid://dqhnvufhnpfes" path="res://assets/sounds/metronome.wav" id="5_61aba"]
[ext_resource type="Texture2D" uid="uid://b2dn3lirhirbs" path="res://assets/sprites/UI/T_UpSection.png" id="5_e2u5f"]
[ext_resource type="Script" path="res://scripts/BeatLightsController.cs" id="5_fv66h"]
[ext_resource type="Texture2D" uid="uid://sul4e87l7wk4" path="res://assets/sprites/UI/T_Panel3.png" id="5_kr745"]
[ext_resource type="Texture2D" uid="uid://c74esq7oj3qsf" path="res://assets/sprites/UI/T_LightRed.png" id="6_4lu42"]
[ext_resource type="FontFile" uid="uid://c6o17tyd6p8eg" path="res://assets/fonts/kindergarten.ttf" id="6_8sxd6"]

[sub_resource type="ImageTexture" id="ImageTexture_rn71e"]

[node name="Root" type="Node2D"]
position = Vector2(0, 1)

[node name="Background" type="Sprite2D" parent="."]
z_index = -100
scale = Vector2(1920, 1080)
texture = SubResource("ImageTexture_rn71e")
script = ExtResource("1_t8q8t")

[node name="Camera" type="Camera2D" parent="."]
anchor_mode = 0

[node name="MusicPlayer" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true

[node name="MetronomeClick" type="AudioStreamPlayer" parent="."]
stream = ExtResource("5_61aba")
volume_db = -6.604

[node name="BeatController" type="Node" parent="." node_paths=PackedStringArray("MusicPlayer", "MetronomeClickPlayer", "BeatTimer", "DelayStartTimer", "TrackSet", "BeatLights")]
script = ExtResource("4_ndt71")
MusicPlayer = NodePath("../MusicPlayer")
MetronomeClickPlayer = NodePath("../MetronomeClick")
BeatTimer = NodePath("BeatTimer")
DelayStartTimer = NodePath("DelayStartTimer")
TrackSet = NodePath("../UI/UIRoot/ScreenMargin/Control/TrackSet")
BeatLights = NodePath("../UI/UIRoot/Menu/BeatLights")

[node name="BeatTimer" type="Timer" parent="BeatController"]
unique_name_in_owner = true

[node name="DelayStartTimer" type="Timer" parent="BeatController"]
wait_time = 2.0
one_shot = true

[node name="UI" type="CanvasLayer" parent="."]

[node name="UIRoot" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Menu" type="TextureRect" parent="UI/UIRoot"]
layout_mode = 0
offset_right = 1920.0
offset_bottom = 168.0
texture = ExtResource("5_e2u5f")

[node name="BeatLights" type="HBoxContainer" parent="UI/UIRoot/Menu" node_paths=PackedStringArray("Light1", "Light2", "Light3", "Light4")]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 410.0
offset_top = -54.0
offset_right = 678.0
offset_bottom = 36.0
grow_vertical = 2
scale = Vector2(0.9, 0.9)
script = ExtResource("5_fv66h")
OffTexture = ExtResource("5_0dxl0")
OnTexture = ExtResource("6_4lu42")
Light1 = NodePath("Light1")
Light2 = NodePath("Light2")
Light3 = NodePath("Light3")
Light4 = NodePath("Light4")

[node name="Light1" type="TextureRect" parent="UI/UIRoot/Menu/BeatLights"]
layout_mode = 2
texture = ExtResource("5_0dxl0")

[node name="Light2" type="TextureRect" parent="UI/UIRoot/Menu/BeatLights"]
layout_mode = 2
texture = ExtResource("5_0dxl0")

[node name="Light3" type="TextureRect" parent="UI/UIRoot/Menu/BeatLights"]
layout_mode = 2
texture = ExtResource("6_4lu42")

[node name="Light4" type="TextureRect" parent="UI/UIRoot/Menu/BeatLights"]
layout_mode = 2
texture = ExtResource("5_0dxl0")

[node name="ScoreContainer" type="TextureRect" parent="UI/UIRoot/Menu"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -225.0
offset_right = 604.0
offset_bottom = 260.0
grow_horizontal = 2
scale = Vector2(0.55, 0.55)
texture = ExtResource("5_kr745")

[node name="ScoreLabel" type="Label" parent="UI/UIRoot/Menu/ScoreContainer"]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 100.0
offset_top = -40.0
offset_right = 319.0
offset_bottom = 40.0
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("6_8sxd6")
theme_override_font_sizes/font_size = 80
text = "Score:"

[node name="Score" type="Label" parent="UI/UIRoot/Menu/ScoreContainer"]
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = -449.0
offset_top = -40.0
offset_right = -92.0
offset_bottom = 40.0
grow_horizontal = 0
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("6_8sxd6")
theme_override_font_sizes/font_size = 80
text = "10000 pts"

[node name="ScreenMargin" type="MarginContainer" parent="UI/UIRoot"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 150
theme_override_constants/margin_top = 150
theme_override_constants/margin_right = 150
theme_override_constants/margin_bottom = 0

[node name="Control" type="Control" parent="UI/UIRoot/ScreenMargin"]
layout_mode = 2

[node name="TrackSet" parent="UI/UIRoot/ScreenMargin/Control" node_paths=PackedStringArray("BeatController") instance=ExtResource("3_jg4e7")]
layout_mode = 1
BeatController = NodePath("../../../../../BeatController")

[node name="HBoxContainer" type="HBoxContainer" parent="UI/UIRoot"]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 138.0
grow_horizontal = 2
theme_override_constants/separation = 235
alignment = 1

[node name="ScoreLabel" type="Label" parent="UI/UIRoot/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 101
text = "uij,ij,d"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ComboLabel" type="Label" parent="UI/UIRoot/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 101
text = "bullshit"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ScoreController" type="Node2D" parent="." node_paths=PackedStringArray("ScoreLabel", "ComboLabel")]
script = ExtResource("7_mwub6")
ScoreLabel = NodePath("../UI/UIRoot/HBoxContainer/ScoreLabel")
ComboLabel = NodePath("../UI/UIRoot/HBoxContainer/ComboLabel")

[connection signal="finished" from="MusicPlayer" to="BeatController" method="_on_MusicPlayer_finished"]
[connection signal="timeout" from="BeatController/BeatTimer" to="BeatController" method="_on_BeatTimer_timeout"]
[connection signal="timeout" from="BeatController/DelayStartTimer" to="BeatController" method="_on_DelayStartTimer_timeout"]
